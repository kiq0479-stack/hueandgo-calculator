# 휴앤고 단가계산기 QA 풀스캔 문서

## 프로젝트 정보
- **프로젝트명**: hueandgo-calculator
- **라이브 URL**: https://hueandgo-calculator.vercel.app
- **GitHub**: kiq0479-stack/hueandgo-calculator
- **최종 QA 일자**: 2026-02-12

---

## 1. 추가상품 매칭 검증 (완료)

### 1.1 매핑 데이터 검증
- **검증 방법**: 엑셀 파일과 `src/data/addon-mapping.json` 비교
- **결과**: ✅ 38개 상품 전체 매핑 일치
- **소스**: `/Users/kangtaeho/.openclaw/media/inbound/9771f081-789e-4b3b-a154-070d61c3ad25.xlsx`

### 1.2 상품별 추가상품 매핑 현황
| 상품코드 | 상품명 | 추가상품 개수 |
|---------|-------|-------------|
| P00000BU | 아크릴 키링 | 5개 |
| P00000CF | 아크릴 스마트톡 | 4개 |
| P00000EC | 아크릴 젤펜 | 6개 |
| P0000BNI | 유사코롯타 | 3개 |
| P0000BIS | 아크릴 볼펜 | 5개 |
| P0000BIM | 아크릴 띠용용 등신대 | 3개 |
| P0000BBG | 아크릴 메모보드 | 3개 |
| P00000ZE | 아크릴 자석 포토카드 스탠드 | 5개 |
| P00000YE | 아크릴 참 양쪽집게 | 3개 |
| P00000XP | 아크릴 테이프 홀더 | 8개 |
| P00000WI | 아크릴 충전단자 보호캡 | 5개 |
| P00000VP | 아크릴 연필꽂이 | 4개 |
| P00000VN | 아크릴 자 | 4개 |
| P00000TX | 아크릴 입간판 집게 | 4개 |
| P00000TS | 아크릴 폰 거치대 | 5개 |
| P00000TC | 오로라 아크릴 키링 | 4개 |
| P00000RW | 컬러 아크릴 키링 | 4개 |
| P00000OS | 아크릴 코롯토 | 5개 |
| P00000OK | 아크릴 회전 스마트톡 | 5개 |
| P00000NK | 아크릴 머들러 | 3개 |
| P00000NE | 아크릴 메모꽂이 | 4개 |
| P00000KV | 아크릴 QR 스탠드 | 1개 |
| P00000KG | 아크릴 뱃지 | 3개 |
| P00000KE | 아크릴 LED 파츠 참 | 3개 |
| P00000JW | 아크릴 자석 집게 | 3개 |
| P00000GA | 피규어 턴테이블 | 0개 |
| P00000ET | 아크릴 코스터 | 3개 |
| P00000ER | 아크릴 자석 | 3개 |
| P00000EQ | 아크릴 집게 | 3개 |
| P00000EP | 아크릴 포토프롭 | 6개 |
| P00000DR | 아크릴 맥세이프 스마트톡 | 4개 |
| P00000DA | 아크릴 파츠 참 | 3개 |
| P00000CG | 아크릴 등신대 | 4개 |
| P00000CE | 스팽글쿠션 | 1개 |
| P00000CD | 타투스티커 | 4개 |
| P00000CC | 마우스패드 | 3개 |
| P00000CA | 일반쿠션 | 3개 |
| P00000BZ | 안경닦이 | 4개 |

---

## 2. 추가상품명 표시 규칙 (구현 완료)

### 2.1 규칙 정의
1. **옵션 2개 이상**: 선택한 옵션 이름으로 표시 (예: "50mm", "블랙")
2. **옵션 1개 또는 없음**: 상품명에서 메인상품명, 괄호 안/뒤 내용 제거

### 2.2 cleanAddonName 함수 테스트 결과
| 입력 (추가상품명) | 메인상품명 | 출력 |
|-----------------|-----------|------|
| 키링 개별 포장 (수량에 맞게...) | 아크릴 키링 | 개별 포장 |
| 젤펜 배경제거(누끼작업) 이미지 개수에... | 아크릴 젤펜 | 배경제거 |
| 아크릴 키링 체인 연결 | 아크릴 키링 | 체인 연결 |
| 개별포장 OPP+봉투 | 아크릴 코스터 | 개별포장 OPP+봉투 |
| 배경제거(누끼작업) | 아크릴 키링 | 배경제거 |
| 아크릴 키링 별매 | 아크릴 키링 | 별매 |
| 스마트톡 전용 케이스 | 아크릴 스마트톡 | 전용 케이스 |

### 2.3 구현 위치
- **함수**: `src/lib/product-addon-mapping.ts` → `cleanAddonName()`
- **적용**: `src/components/calculator/Calculator.tsx` → 견적 추가 시

---

## 3. 메인상품명 표시 규칙 (확인 완료)

### 3.1 규칙
- "(파트너 전용)" 제거
- "(파트너 전용_에디터)" 제거

### 3.2 구현 위치
- **함수 1**: `src/lib/product-addon-mapping.ts` → `cleanMainProductName()`
- **함수 2**: `src/components/quote/QuoteItemList.tsx` → `formatProductName()`
- **함수 3**: `src/components/quote/HotangQuoteForm.tsx` → `formatProductName()`

---

## 4. 기능 테스트 체크리스트

### 4.1 상품 선택 플로우
- [ ] 메인상품 선택 시 옵션 로드
- [ ] 옵션 선택 시 가격 변경
- [ ] 추가상품 목록 표시 (매핑된 상품만)
- [ ] 추가상품 선택 및 수량 조절

### 4.2 견적 추가 플로우
- [ ] 메인상품만 견적 추가
- [ ] 추가상품만 견적 추가 (메인상품 없이)
- [ ] 메인상품 + 추가상품 함께 견적 추가
- [ ] 견적서에 정제된 상품명 표시

### 4.3 견적서 양식
- [ ] 브랜디즈 양식 - 견적서
- [ ] 브랜디즈 양식 - 거래명세서
- [ ] 호탱감탱 양식 - 견적서
- [ ] 호탱감탱 양식 - 거래명세서
- [ ] 수동 항목 추가
- [ ] 양식 저장/불러오기

### 4.4 내보내기
- [ ] PDF 다운로드
- [ ] 엑셀 다운로드

---

## 5. 추가상품 옵션 전수검사 (진행 중)

### 5.1 전수검사 API
- **엔드포인트**: `GET /api/debug/addon-options`
- **파라미터**:
  - `?main=P00000BU` - 특정 메인상품의 추가상품만 검사
  - `?addon=P00000DV` - 특정 추가상품만 검사
  - 파라미터 없음 - 전체 검사 (72개 추가상품)

### 5.2 사용 방법
```bash
# 전체 검사 (인증 필요 - 브라우저에서 먼저 로그인)
curl "https://hueandgo-calculator.vercel.app/api/debug/addon-options"

# 키링 추가상품만 검사
curl "https://hueandgo-calculator.vercel.app/api/debug/addon-options?main=P00000BU"

# 특정 추가상품 검사
curl "https://hueandgo-calculator.vercel.app/api/debug/addon-options?addon=P00000DV"
```

### 5.3 개선된 옵션 표시
- 옵션 드롭다운 라벨에 옵션명 표시 (예: "색상 선택 *")
- 플레이스홀더에 옵션명 포함 (예: "- 색상을(를) 선택해 주세요 -")

### 5.4 알려진 이슈
- **"개별포장" 옵션 "투명" 문제**: Cafe24 API에서 오는 원본 데이터 확인 필요
- 브라우저 인증 없이는 API 테스트 불가 (OAuth 필요)

### 5.5 전수검사 결과 (수동 확인 필요)
| 메인상품 | 추가상품 | 옵션명 | 옵션값 | 상태 |
|---------|---------|--------|--------|------|
| 아크릴 키링 | 개별포장(P00000??) | ? | 투명? | ⚠️ 확인 필요 |
| ... | ... | ... | ... | ... |

---

## 6. 코드 변경 내역 (2026-02-12)

### 6.1 수정된 파일
1. **src/lib/product-addon-mapping.ts**
   - `cleanAddonName()` 함수 개선: 괄호 뒤 내용 먼저 제거 → 정확한 정제
   - `cleanMainProductName()` 함수 확인: "(파트너 전용_에디터)" 패턴 추가

2. **src/components/calculator/Cafe24AddonSelector.tsx**
   - `SelectedAddon` 타입에 `optionCount` 필드 추가
   - 추가 시 옵션 개수 저장

3. **src/components/calculator/Calculator.tsx**
   - `cleanAddonName` import 추가
   - 견적 추가 시 추가상품명 정제 로직 구현
     - optionCount > 1: 옵션 이름 사용
     - optionCount <= 1: cleanAddonName 사용

### 6.2 검증된 데이터
- `src/data/addon-mapping.json`: 38개 상품 매핑 완료

---

## 7. 알려진 제한사항

1. **Cafe24 API 의존성**: 토큰 만료 시 재인증 필요
2. **추가상품 옵션**: Cafe24 API에서 별도 호출 필요 (약간의 딜레이)
3. **PDF 생성**: html2pdf 라이브러리 사용 (일부 스타일 제한)

---

## 8. 배포 히스토리

| 일자 | 버전 | 변경 내용 |
|-----|------|----------|
| 2026-02-12 | v1.1.0 | 추가상품 매칭 완성, 상품명 정제 규칙 구현 |

---

## 9. QA 담당자
- **자동화**: Claude Code Subagent
- **검토**: 메인 에이전트
